<ion-header class="top-header ion-no-padding">
  <ion-list class="top-heading three-block">
    <ion-item slot="start">
      <ion-buttons class="ion-no-margin" (click)="goBack()">
        <ion-icon ios="ios-arrow-back" md="md-arrow-back"></ion-icon>
      </ion-buttons>
    </ion-item>
    <ion-item slot="center">
      <ion-datetime displayFormat="MMM DD, YYYY" [(ngModel)]="myDate" value="{{myDate}}" (ionChange)="sortDate(event)">

      </ion-datetime>
    </ion-item>
    <ion-item class="icon-right-side ion-text-end" slot="end">
      <ion-toggle slot="end" [(ngModel)]="showAll" (ionChange)="onChange($event)" *ngIf="programTabs == 'hosting'">
      </ion-toggle>
    </ion-item>
  </ion-list>
</ion-header>
<ion-content class="main_content">
<!------------- S K E L E T O N -------------- -->
<div [ngSwitch]="programTabs" *ngIf="!programList">
  <ion-list lines="none" *ngSwitchCase="'hosting'" class="ion-no-padding">
    <ion-card *ngFor="let itemSkeleton of [].constructor(10)" class="ion-no-margin">
      <ion-item class="item-card">
        <ion-avatar slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-avatar>
        <ion-label>
          <ion-skeleton-text animated style="width: 80%;"></ion-skeleton-text>
          <ion-skeleton-text animated style="width: 60%;"></ion-skeleton-text>
          <ion-skeleton-text animated style="width: 30%;"></ion-skeleton-text>
        </ion-label>
      </ion-item>
    </ion-card>
  </ion-list>
</div>
<!------------- E N D   S K E L E T O N ----------------->
  <ion-segment class="top-segment" (ionChange)="tabs($event)">
    <ion-segment-button value="hosting" *ngIf="userData?.user_type" checked>
      <span>Hosting <ion-badge class="circle-badge green">{{programList?.length || 0}}</ion-badge></span>
    </ion-segment-button>
    <ion-segment-button value="attending">
      <span>Attending <ion-badge class="circle-badge green">{{accProgramList?.length || 0}}</ion-badge></span>
    </ion-segment-button>
    <ion-segment-button value="requested">
      <span>Requested <ion-badge class="circle-badge green">{{reqProgramList?.length || 0}}</ion-badge></span>
    </ion-segment-button>
  </ion-segment>
  <div [ngSwitch]="programTabs">
    <ion-list lines="none" *ngSwitchCase="'hosting'" class="ion-no-padding">
      <div *ngIf="programList &&  !showAll">
        <ion-card *ngFor="let program of programList" class="ion-no-margin">
          <ion-item class="item-card">
            <ion-avatar slot="start" [routerLink]="['/program-details',program.id]">
              <img src="{{url}}{{program?.img_arr[0]}}" *ngIf="program?.image_path">
              <img src="../../../assets/images/loading.jpg" *ngIf="!program?.image_path">
            </ion-avatar>
            <ion-label [routerLink]="['/program-details', program.id]">
              <h3 class="list-person">{{program?.title}}</h3>
              <span class="list-name d-block">{{program?.type_id}}</span>
              <span class="list-name">By: {{program?.program_user?.user_name}}</span>
              <p class="text-green">{{program?.converted |date:'medium'}}</p>
            </ion-label>
            <div class="action-links" slot="end">
              <ion-icon ios="ios-more" md="md-more" (click)="hostingDropdown(program?.id)"></ion-icon>
              <ion-icon ios="ios-restaurant" md="md-restaurant" (click)="showSchedule(program)"></ion-icon>
              <ion-icon ios="ios-repeat" md="md-repeat" (click)="expandItem(program,1)"
                *ngIf="program?.repeate_status!=2">
              </ion-icon>
            </div>

          </ion-item>
          <app-expandable expandHeight="300px" class="timeline-block" [expanded]="program.expanded">
            <div class="lds-dual-ring" *ngIf="!cloneProg"></div>
            <ion-list class="timeline-list" lines="none">
              <ion-item *ngFor="let item of cloneProg">
                <ion-label>
                  <h3 class="list-person">{{item?.converted | date:'medium'}} <span class="ion-float-right d-flex">
                      <ion-icon class="text-green" ios="ios-time" md="md-time"></ion-icon> {{item?.program_duration}}
                      Min.
                    </span> </h3>
                  <p>{{item?.title}} - {{item?.description}}</p>
                </ion-label>
              </ion-item>
            </ion-list>
          </app-expandable>
        </ion-card>
      </div>
      <div *ngIf="showAll">
        <ion-card *ngFor="let program of allProgramList | programFilter" class="ion-no-margin">
          <ion-item class="item-card">
            <ion-avatar slot="start" [routerLink]="['/program-details',program.id]">
              <img src="{{url}}{{program?.img_arr[0]}}" *ngIf="program?.image_path">
              <img src="../../../assets/images/loading.jpg" *ngIf="!program?.image_path">
            </ion-avatar>
            <ion-label [routerLink]="['/program-details', program.id]">
              <h3 class="list-person">{{program?.title}}</h3>
              <span class="list-name d-block">{{program?.type_id}}</span>
              <span class="list-name">By: {{program?.program_user?.user_name}}</span>
              <p class="text-green">{{program?.converted |date:'medium'}}</p>
            </ion-label>
            <div class="action-links" slot="end">
              <ion-icon ios="ios-more" md="md-more" (click)="hostingDropdown(program?.id)"></ion-icon>
              <ion-icon ios="ios-restaurant" md="md-restaurant" (click)="showSchedule(program)"></ion-icon>
              <ion-icon ios="ios-repeat" md="md-repeat" (click)="expandItem(program,4)"
                *ngIf="program?.repeate_status!=2">
              </ion-icon>
            </div>

          </ion-item>
          <app-expandable expandHeight="300px" class="timeline-block" [expanded]="program.expanded">
            <div class="lds-dual-ring" *ngIf="!cloneProg"></div>
            <ion-list class="timeline-list" lines="none">
              <ion-item *ngFor="let item of cloneProg">
                <ion-label>
                  <h3 class="list-person">{{item?.converted | date:'medium'}} <span class="ion-float-right d-flex">
                      <ion-icon class="text-green" ios="ios-time" md="md-time"></ion-icon> {{item?.program_duration}}
                      Min.
                    </span> </h3>
                  <p>{{item?.title}} - {{item?.description}}</p>
                </ion-label>
              </ion-item>
            </ion-list>
          </app-expandable>
        </ion-card>
      </div>
      <div *ngIf="programList?.length < 1 && allProgramList?.length<1" class="no-data">No Hosting Program</div>
    </ion-list>
    <!------------ A T T E N D I N G   P R O G R A M  -->
    <ion-list lines="none" *ngSwitchCase="'attending'">
      <!-- <app-invite-request  [tabData]="accTabData"></app-invite-request> -->
      <ion-item class="item-card" *ngFor="let item of accProgramList">
        <ion-avatar slot="start" [routerLink]="['/program-view',item.id]">
          <img src="{{url}}{{item?.img_arr[0]}}" *ngIf="item?.image_path">
          <img src="../../../assets/images/loading.jpg" *ngIf="!item?.image_path">
        </ion-avatar>
        <ion-label [routerLink]="['/program-view',item.id]">
          <h3 class="list-person">{{item.title}}</h3>
          <span class="list-name d-block">{{item.type_id}}</span>
          <span class="list-name">By: {{item?.program_user?.user_name}}</span>
          <p class="text-green">{{item?.converted |date:'medium'}}</p>
        </ion-label>
        <div class="action-links" slot="end">
          <ion-icon ios="ios-restaurant" md="md-restaurant" (click)="showSchedule(item)"></ion-icon>
          <ion-icon ios="ios-repeat" md="md-repeat" (click)="expandItem(item,2)"></ion-icon>
        </div>
      </ion-item>
      <div *ngIf="accProgramList?.length < 1" class="no-data">No Attending Program</div>
    </ion-list>
    <app-expandable expandHeight="300px" class="timeline-block" [expanded]="item?.expanded">
      <div class="lds-dual-ring" *ngIf="!cloneProg"></div>
      <ion-list class="timeline-list" lines="none">
        <ion-item *ngFor="let item of cloneProg">
          <ion-label>
            <h3 class="list-person">{{item?.converted | date:'medium'}} <span class="ion-float-right d-flex">
                <ion-icon class="text-green" ios="ios-time" md="md-time"></ion-icon> {{item?.program_duration}}
                Min.
              </span> </h3>
            <p>{{item?.title}} - {{item?.description}}</p>
          </ion-label>
        </ion-item>
      </ion-list>

    </app-expandable>

    <!----------- R E Q U E S T E D   P R O G R A M  -->
    <ion-list lines="none" *ngSwitchCase="'requested'">
      <!-- <app-invite-request [tabData]="reqTabData"></app-invite-request> -->
      <ion-item class="item-card" *ngFor="let item of reqProgramList">
        <ion-avatar slot="start" [routerLink]="['/program-view',item.id]">
          <img src="{{url}}{{item?.img_arr[0]}}" *ngIf="item?.image_path">
          <img src="../../../assets/images/loading.jpg" *ngIf="!item?.image_path">
        </ion-avatar>
        <ion-label [routerLink]="['/program-view',item.id]">
          <h3 class="list-person">{{item.title}}</h3>
          <span class="list-name d-block">{{item.type_id}}</span>
          <span class="list-name">By: {{item?.program_user?.user_name}}</span>
          <p class="text-green">{{item?.converted |date:'medium'}}</p>
        </ion-label>
        <div class="action-links" slot="end">
          <ion-icon ios="ios-more" md="md-more" (click)="requestDropdown(item.id)"></ion-icon>
          <ion-icon ios="ios-restaurant" md="md-restaurant" (click)="showSchedule(item)"></ion-icon>
          <ion-icon ios="ios-repeat" md="md-repeat" (click)="expandItem(item,3)" *ngIf="item?.repeate_status!=2">
          </ion-icon>
        </div>
      </ion-item>
      <div *ngIf="reqProgramList?.length < 1" class="no-data">No Requested Program</div>
    </ion-list>
    <app-expandable expandHeight="300px" class="timeline-block" [expanded]="item?.expanded">
      <div class="lds-dual-ring" *ngIf="!cloneProg"></div>
      <ion-list class="timeline-list" lines="none">
        <ion-item *ngFor="let item of cloneProg">
          <ion-label>
            <h3 class="list-person">{{item?.converted | date:'medium'}} <span class="ion-float-right d-flex">
                <ion-icon class="text-green" ios="ios-time" md="md-time"></ion-icon> {{item?.program_duration}}
                Min.
              </span> </h3>
            <p>{{item?.title}} - {{item?.description}}</p>
          </ion-label>
        </ion-item>
      </ion-list>

    </app-expandable>
  </div>
  
</ion-content>