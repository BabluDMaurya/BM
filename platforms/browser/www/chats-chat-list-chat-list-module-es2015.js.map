{"version":3,"sources":["./src/app/chats/chat-list/chat-list.page.html","./src/app/chats/chat-list/chat-list-routing.module.ts","./src/app/chats/chat-list/chat-list.module.ts","./src/app/chats/chat-list/chat-list.page.scss","./src/app/chats/chat-list/chat-list.page.ts"],"names":[],"mappings":"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","file":"chats-chat-list-chat-list-module-es2015.js","sourcesContent":["export default \"<ion-header class=\\\"top-header ion-no-padding\\\">\\r\\n  <ion-list class=\\\"top-heading three-block\\\">\\r\\n    <ion-item slot=\\\"start\\\">\\r\\n      <ion-buttons class=\\\"ion-no-margin\\\" [routerLink]=\\\"['/tabs/consultant-profile']\\\">\\r\\n        <ion-icon ios=\\\"ios-arrow-back\\\" md=\\\"md-arrow-back\\\"></ion-icon>\\r\\n      </ion-buttons>\\r\\n    </ion-item>\\r\\n    <ion-item slot=\\\"center\\\">\\r\\n      <ion-label>Chats</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"icon-right-side ion-text-end\\\" slot=\\\"end\\\">\\r\\n      <ion-buttons class=\\\"ion-no-margin\\\" slot=\\\"end\\\" [routerLink]=\\\"['/add-private']\\\">\\r\\n        <ion-icon ios=\\\"ios-add\\\" md=\\\"md-add\\\"></ion-icon>\\r\\n      </ion-buttons>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"main_content\\\">\\r\\n  <ion-list class=\\\"chatlist_header\\\">\\r\\n    <ion-toolbar class=\\\"searchbar\\\">\\r\\n      <ion-searchbar [(ngModel)]=\\\"term\\\" animated=\\\"true\\\"></ion-searchbar>\\r\\n    </ion-toolbar>\\r\\n    <ion-list-header class=\\\"ion-padding-horizontal\\\">\\r\\n      <h5 class=\\\"ion-no-margin\\\">Messages</h5>\\r\\n      <ion-label *ngIf=\\\"requestCount > 0\\\" class=\\\"text-green\\\" (click)=\\\"showRequests()\\\">{{requestCount}} Requests</ion-label>\\r\\n    </ion-list-header>\\r\\n  </ion-list>  \\r\\n  <ion-list lines=\\\"none\\\" class=\\\"chatList_content\\\" detail=\\\"false\\\">\\r\\n    <ion-item class=\\\"chatList_item\\\"  lines=\\\"none\\\" detail=\\\"false\\\" *ngFor=\\\"let groups of items | filter:term\\\" (click)=\\\"chatRoom(groups)\\\">\\r\\n    <ion-avatar slot=\\\"start\\\" *ngIf=\\\"(groups.user_name | slice:0:3) == 'PG_'\\\">\\r\\n      <img *ngIf=\\\"groups?.profile_pic\\\" src=\\\"{{pgimgurl}}{{groups?.profile_pic}}\\\"> \\r\\n      <img *ngIf=\\\"!groups?.profile_pic\\\" src=\\\"../../assets/images/user.jpg\\\">       \\r\\n    </ion-avatar>\\r\\n    <ion-avatar slot=\\\"start\\\" *ngIf=\\\"(groups.user_name | slice:0:3) != 'PG_'\\\">\\r\\n      <img *ngIf=\\\"groups?.profile_pic\\\" src=\\\"{{url}}{{groups?.profile_pic}}\\\"> \\r\\n      <img *ngIf=\\\"!groups?.profile_pic\\\" src=\\\"../../assets/images/user.jpg\\\">       \\r\\n    </ion-avatar>\\r\\n\\r\\n    <ion-label>\\r\\n      <!-- <h3 class=\\\"list-person\\\" *ngIf=\\\"(groups.user_name | slice:0:3) == 'PG_'\\\">{{ groups.user_name | slice:0:3}}</h3> -->\\r\\n      <h3 class=\\\"list-person\\\">{{groups.user_name}}</h3>\\r\\n      <span class=\\\"list-name\\\">{{groups.message}}</span>\\r\\n      </ion-label>\\r\\n    <img slot=\\\"end\\\" class=\\\"w26\\\" *ngIf=\\\"groups.type == 1\\\" src=\\\"../../../assets/images/follower-user.svg\\\" />\\r\\n    <img slot=\\\"end\\\" class=\\\"w26\\\" *ngIf=\\\"groups.type == 2\\\" src=\\\"../../../assets/images/follower-group.svg\\\" />\\r\\n    <ion-badge color=\\\"secondary\\\" slot=\\\"end\\\" *ngIf=\\\"groups.type == 1 && groups.unreadmesage > 0\\\">{{groups.unreadmesage}}</ion-badge>\\r\\n  </ion-item>\\r\\n  </ion-list> \\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ChatListPage } from './chat-list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ChatListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ChatListPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n// import {ComponentModule} from '../components.modules';\r\nimport { ChatListPageRoutingModule } from './chat-list-routing.module';\r\nimport { ChatListPage } from './chat-list.page';\r\nimport { LazyLoadImageModule } from 'ng-lazyload-image';\r\nimport { Ng2SearchPipeModule } from 'ng2-search-filter';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    // ComponentModule,\r\n    ChatListPageRoutingModule,\r\n    LazyLoadImageModule,\r\n    Ng2SearchPipeModule\r\n  ],\r\n  declarations: [ChatListPage]\r\n})\r\nexport class ChatListPageModule {}\r\n","export default \".followers-list {\\n  height: calc(100% - 60px); }\\n\\n.nutrition-no-data {\\n  height: calc(100% - 100px) !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdHMvY2hhdC1saXN0L0M6XFx4YW1wcFxcaHRkb2NzXFxpbnRvYWN0aXZlXFxCTS9zcmNcXGFwcFxcY2hhdHNcXGNoYXQtbGlzdFxcY2hhdC1saXN0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLHlCQUF5QixFQUFBOztBQUU3QjtFQUNJLHFDQUFxQyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvY2hhdHMvY2hhdC1saXN0L2NoYXQtbGlzdC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBoaXRlc2ggY3NzIHN0cnRcclxuLmZvbGxvd2Vycy1saXN0IHtcclxuICAgIGhlaWdodDogY2FsYygxMDAlIC0gNjBweCk7XHJcbn1cclxuLm51dHJpdGlvbi1uby1kYXRhIHtcclxuICAgIGhlaWdodDogY2FsYygxMDAlIC0gMTAwcHgpICFpbXBvcnRhbnQ7XHJcbn1cclxuLy8gLmNoYXRsaXN0X2hlYWRlcntcclxuLy8gICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuLy8gICAgIHRvcDogNTBweDtcclxuLy8gICAgIGxlZnQ6IDA7XHJcbi8vICAgICByaWdodDogMDtcclxuLy8gICAgIHotaW5kZXg6IDE7XHJcbi8vIH1cclxuLy8gLmNoYXRsaXN0X2NvbnRlbnR7XHJcbi8vICAgICBtYXJnaW4tdG9wOiAxMDBweCAhaW1wb3J0YW50O1xyXG4vLyB9XHJcbi8vIC5jYXRsaXN0X2l0ZW17XHJcbi8vICAgICBtYXJnaW46IDVweCAwICFpbXBvcnRhbnQ7XHJcbi8vIH1cclxuLy8gaGl0ZXNoIGNzcyBlbmQiXX0= */\"","import { Component, OnInit} from '@angular/core';\r\nimport { Config } from './../../config/config';\r\nimport { Socket } from 'ngx-socket-io';\r\nimport { NavController,ModalController,ToastController } from '@ionic/angular';\r\nimport { RequestsModalComponent } from '../requests-modal/requests-modal.component';\r\nimport { Router} from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common.service';\r\nimport { ChatService } from 'src/app/services/chat.service';\r\nimport { ChatRoomsComponent } from './../chat-rooms/chat-rooms.component';\r\n@Component({\r\n  selector: 'app-chat-list',\r\n  templateUrl: './chat-list.page.html',\r\n  styleUrls: ['../../app.component.scss','./chat-list.page.scss'],\r\n})\r\nexport class ChatListPage implements OnInit {\r\n  public searchTerm: string = \"\";\r\n  list : any = 0;\r\n  userData:any;\r\n  callApiv : any; \r\n  requestCount : any = 0;\r\n  items : any = [];\r\n  term = '';\r\n  url : any = Config.profilePic;\r\n  pgimgurl : any = Config.ApiUrl;\r\n  profileDefaultImage = './../../../assets/images/user.jpg';\r\n  constructor(\r\n    private socket: Socket,\r\n    private navCtrl: NavController,\r\n    public modalController: ModalController,\r\n    private router:Router,\r\n    private commonService : CommonService,\r\n    private chatService : ChatService,\r\n    private toastCtrl: ToastController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.userData = JSON.parse(localStorage.getItem('userData'));\r\n    this.setFilteredItems();\r\n  }\r\n  async showToast(msg) {\r\n    let toast = await this.toastCtrl.create({\r\n      message: msg,\r\n      position: 'top',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n  ionViewWillEnter() {    \r\n    this.socket.emit('user-list', this.userData.id);\r\n    this.callApiv = setInterval(() => {\r\n      this.socket.emit('user-list', this.userData.id); \r\n    }, 5000);\r\n    this.myChatList();    \r\n  }\r\n  myChatList(){   \r\n    this.socket.fromEvent('my-chat-list').subscribe(receiveMessageArr => {\r\n      this.requestCount = 0;\r\n      this.items = receiveMessageArr;\r\n      console.log(\"receiveMessageArr:\" +  JSON.stringify(receiveMessageArr));\r\n    });\r\n    this.socket.fromEvent('singleChatRequestCount').subscribe(receiveMessageArr => {\r\n      this.requestCount = this.requestCount + receiveMessageArr[0].single_chat_request_count;      \r\n      // console.log(\"singleCount :\" + this.requestCount);\r\n    });\r\n    this.socket.fromEvent('groupChatRequestCount').subscribe(receiveMessageArr => {\r\n      this.requestCount = this.requestCount + receiveMessageArr[0].group_chat_request_count;\r\n      // console.log(\"groupCount :\" + this.requestCount);      \r\n    });\r\n  }\r\n  setFilteredItems() {    \r\n    this.items = this.chatService.filterItems(this.searchTerm);\r\n  }\r\n  async showRequests(){\r\n    const modal = await this.modalController.create({\r\n      component: RequestsModalComponent\r\n    });\r\n    return await modal.present();\r\n  }\r\n  chatRoom(groups:any){ \r\n    console.log(\"groups\" + JSON.stringify(groups));\r\n    var params = groups;   \r\n    var RID = '';\r\n    if(this.userData.id == params.senderID){\r\n      RID = params.receiverID;\r\n    }else{\r\n      RID = params.senderID;\r\n    }\r\n    // if(parseInt(params.type) == 1){\r\n    //   this.router.navigate(['/chat-room/'+parseInt(RID)+'/'+params.room+'/'+parseInt(params.type)]);\r\n    // }else{\r\n    //   // groups.id,groups.room,groups.type\r\n    //   this.router.navigate(['/chat-room/'+parseInt(params.id)+'/'+params.room+'/'+parseInt(params.type)]);\r\n    // }\r\n    \r\n    var recId = 0;\r\n    if(parseInt(params.type) == 1){\r\n      recId = parseInt(RID);\r\n    }else{\r\n      recId = parseInt(params.id);\r\n    }\r\n    var fileData = {\r\n      chatType : parseInt(params.type),\r\n      room : params.room,\r\n      receiverId : recId,\r\n      requestId : parseInt(params.request_id),\r\n      }\r\n    this.commonService.presentModal(ChatRoomsComponent,'fullModal',fileData);\r\n  }\r\n  goBack() {\r\n    this.navCtrl.back();\r\n  }  \r\n}\r\n"],"sourceRoot":"webpack:///"}